<!-- ==========================================================================
     SecciÃ³n "En Vivo"
     Reproductor interactivo para escuchar la emisora en tiempo real
     ========================================================================== -->

<section id="live" class="player">
  <!-- TÃ­tulo principal de la secciÃ³n -->
  <h2>EscÃºchanos en Vivo</h2>

  <div class="custom-player">
    <!-- Logotipo de la emisora -->
    <img
      src="LS94_1.png"
      alt="Logo de Lanceros Stereo"
      class="hero-logo"
      loading="lazy"
    />

    <!-- BotÃ³n para reproducir o pausar el stream -->
    <button
      class="play-btn"
      type="button"
      [ngClass]="{
        playing: (playerState.isPlaying$ | async),
        paused: !(playerState.isPlaying$ | async)
      }"
      (click)="togglePlayback()"
      aria-label="Control de reproducciÃ³n"
    >
      <!-- Texto dinÃ¡mico: â–¶ Reproducir -->
      <span *ngIf="!(playerState.isPlaying$ | async)">â–¶ Reproducir</span>
      <!-- Texto dinÃ¡mico: â¸ Pausar -->
      <span *ngIf="playerState.isPlaying$ | async">â¸ Pausar</span>
    </button>

    <!-- Mensaje de estado: escuchando o en pausa -->
    <p class="status">
      {{ (playerState.isPlaying$ | async) ? 'ğŸ”Š Transmitiendo desde Tuta,
      BoyacÃ¡' : 'â¸ En pausa' }}
    </p>

    <!-- Control de volumen visible solo si estÃ¡ reproduciendo (con `getter`) -->
    <div class="volume-control" *ngIf="playerState.isPlaying">
      <label for="volumeSlider">ğŸ”Š Volumen</label>
      <input
        id="volumeSlider"
        type="range"
        min="0"
        max="1"
        step="0.01"
        [value]="volume"
        (input)="handleVolumeChange($event)"
      />
    </div>

    <!-- VisualizaciÃ³n de ondas animadas (sÃ³lo decorativa, accesibilidad desactivada) -->
    <div
      class="wave-container"
      *ngIf="playerState.isPlaying"
      aria-hidden="true"
    >
      <div class="wave"></div>
      <div class="wave"></div>
      <div class="wave"></div>
      <div class="wave"></div>
      <div class="wave"></div>
    </div>

    <!-- Elemento de audio HTML con referencia para control JS -->
    <audio #audioRef [src]="streamUrl"></audio>
  </div>
</section>
